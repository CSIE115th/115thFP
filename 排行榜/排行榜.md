### ourhub 行程排行榜

整合收藏、分享、瀏覽等數據，提供視覺化且高互動性的行程排行榜，讓用戶快速發現熱門與適合自己的旅行行程。

------

### 功能特色

- 多維度排行榜

- 即將出發：依出發日期排序，優先顯示近期行程。

- 熱門地區：依地區統計，找出最受歡迎目的地。

- 行程長度：依天數與旅遊型態（週末遊、短期旅行、長假期、深度旅行）分類。

- 季節精選：依春夏秋冬推薦合適行程。

- 趨勢分析 / 熱門推薦：依收藏、分享、瀏覽等熱度綜合排序。

- 排行榜卡片與排名視覺

- 專屬排名徽章：前 3 名有金/銀/銅獎杯設計與動畫效果，前 10 名與一般名次以不同漸層顏色區分。

- 現代化卡片設計：大圓角卡片、多層陰影、懸停浮起與平滑過渡動畫。

- 關鍵資訊一目了然：

- 標題、地區、出發與結束日期、天數。

- 旅遊型態標籤（週末遊/短期旅行/長假期/深度旅行）。

- 季節標籤、行程狀態（即將出發 / 進行中 / 已結束）。

- 簡短行程描述（自動截斷過長文字）。

- 統計與篩選面板

- 統計總覽（來自 /api/trip-statistics）：

- 總行程數、平均天數、即將出發行程數、進行中行程數、最熱門地區等。

- 篩選功能（來自 /api/get-filters）：

- 依「地區」、「行程長度類型」、「季節」進行組合篩選。

- 一鍵重置篩選條件，快速回到全部結果。

- 收藏與分享整合

- 收藏行程：

- 使用 /api/user-favorites API 新增/取消收藏。

- 依 LINE 用戶 ID 管理收藏紀錄。

- 將收藏清單緩存於 localStorage（含 userId 與 timestamp），有效期 24 小時，減少 API 請求並加快載入。

- 分享行程：

- 透過 /api/user-shares 記錄分享行為。

- 若在 LINE LIFF 環境中，使用 liff.shareTargetPicker 分享行程文字。

- 若不在 LINE 環境，優先呼叫 navigator.share，失敗則自動複製文字至剪貼簿。

- 行程詳情檢視

- 點擊排行榜卡片會呼叫 /api/trip-detail?id=... 取得詳細資訊。

- 使用 TripDetail 元件以彈窗方式顯示行程內容、細節與參與者資訊。

- UI / UX 強化

- 動畫效果：脈衝、光暈、浮動、彈跳、淡入上移等 CSS 動畫增強視覺層次。

- 響應式設計：適配桌面與手機裝置，重點資訊在小螢幕上仍清晰可讀。

- 可用性與可訪問性：清晰的互動反饋、足夠的按鈕尺寸與顏色對比、語義化結構。

------

### 技術架構

- 前端

- React 功能型元件 + Hooks（useState、useEffect）管理狀態與生命週期。

- TripRankingEnhanced 作為主排行榜元件，掛載於 pages/ranking.js。

- 使用 TripRanking.module.css 進行樣式管理與動畫設計。

- 透過 axios 呼叫後端 API。

- 後端 API（Node / Vercel Functions）

- /api/trip-rankings-enhanced：依排行榜類型與篩選條件回傳排行結果。

- /api/trip-statistics：提供排行榜統計總覽數據。

- /api/get-filters：提供可用地區等篩選選項。

- /api/user-favorites：管理用戶收藏（GET/POST/DELETE）。

- /api/user-shares：紀錄分享行為。

- /api/trip-detail：回傳單一行程詳細資訊。

- 快取與效能

- 用戶收藏清單快取於瀏覽器 localStorage，含時間戳與用戶 ID 驗證。

- 首次載入會同時請求排行榜、統計資料、收藏狀態與篩選地區，減少後續等待時間。

- 使用 transform 與 opacity 進行動畫，優化重繪與效能。

------

### 使用方式

1. 進入排行榜頁面

- 於前端路由進入 ranking 頁面（例如：/ranking）。

- 頁面載入時會自動取得排行榜資料、統計資訊與篩選選項。

2. 選擇排行榜類型

- 透過上方分類標籤切換：即將出發、熱門地區、行程長度、季節精選、趨勢分析、熱門推薦。

- 每次切換會重新依對應排序規則從 /api/trip-rankings-enhanced 取得最新資料。

3. 套用篩選條件

- 在篩選區選擇地區、行程長度類型與季節，可組合使用。

- 按下「重置篩選」按鈕可清除所有條件回到完整排行榜。

4. 收藏與分享行程

- 點選卡片上的收藏按鈕，可將行程加入或移除收藏清單。

- 點選分享按鈕，在 LINE LIFF 環境會跳出好友分享選擇，其他環境則會觸發系統分享或自動複製文字。

5. 檢視詳細資訊

- 點擊任一排行榜卡片，即會載入完整行程內容並於彈窗中顯示詳細資訊。

------

### Demo / 設計展示

- 設計展示頁面

- demo-ranking 頁面提供使用模擬資料的 UI 演示，展示：

- 排行榜卡片完整設計與動畫。

- 不同排名視覺效果（前 3 名獎杯特效、前 10 名樣式等）。

- 收藏、分享與行程詳情點擊的互動流程（以 console log 模擬）。

此排行榜模組可獨立作為「熱門行程發現入口」，也能與行程管理、收藏列表等功能整合，提供完整的旅遊發現與管理體驗。